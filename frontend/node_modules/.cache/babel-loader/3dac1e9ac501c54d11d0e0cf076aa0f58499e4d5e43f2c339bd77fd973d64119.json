{"ast":null,"code":"import _slicedToArray from\"/home/aniketkumar/KB/projectMnagementSystem/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectDestructuringEmpty from\"/home/aniketkumar/KB/projectMnagementSystem/frontend/node_modules/@babel/runtime/helpers/esm/objectDestructuringEmpty.js\";import React,{useEffect,useState}from'react';import{Button,Form}from'react-bootstrap';import{useDispatch}from'react-redux';import{useNavigate}from'react-router-dom';//import { useNavigate } from 'react-router-dom'\nimport{userLoginRequestAction}from'../state/action-creators';import{useAppSelector}from'../Types';import{Alertshow}from'../component/AlertShow';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function LoginScreen(_ref){_objectDestructuringEmpty(_ref);var navigate=useNavigate();useEffect(function(){var itemSet=localStorage.getItem('userdata');console.log(itemSet);if(itemSet){console.log('here');navigate('/navigate');}},[]);var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isAdmin=_useState6[0],setIsAdmin=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),errorss=_useState8[0],setErrorss=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),successLogin=_useState10[0],setSuccessLogin=_useState10[1];var dispatch=useDispatch();//const navigate = useNavigate()\nvar _useAppSelector=useAppSelector(function(state){return state.usersReducer;}),success=_useAppSelector.success,loading=_useAppSelector.loading,error=_useAppSelector.error,message=_useAppSelector.message,userId=_useAppSelector.userId,userName=_useAppSelector.userName;var _useAppSelector2=useAppSelector(function(state){return state.userinfoReducer;}),loadinguserinfo=_useAppSelector2.loadinguserinfo,successuserinfo=_useAppSelector2.successuserinfo,usersData=_useAppSelector2.usersData;var alertdata=useAppSelector(function(state){return state.alertReducer;});var emailFunc=function emailFunc(em){setEmail(em);setErrorss(false);};var passFunc=function passFunc(em){setErrorss(false);setPassword(em);};var adminFunc=function adminFunc(che){setIsAdmin(!isAdmin);};var userFunc=function userFunc(che){setIsAdmin(!isAdmin);};var signupHandler=function signupHandler(){dispatch(userLoginRequestAction(email,password));};// if(success)\n// {\n//   dispatch(alertset(\"successfully logged in\", \"success\"))\n// }\nvar submitHandlerFunc=function submitHandlerFunc(e){e.preventDefault();console.log(error);//  useEffect(() => {\n//   const vb : string | null = localStorage.getItem('userdata')\n//   if(vb != null)\n//   {\n//     var obj = JSON.parse(vb)\n//   }\n//  },[])\nif(email.length>0&&password.length>=6){dispatch(userLoginRequestAction(email,password));}else{//setErrorss(true)\n}};if(success){var obj={userId:userId,userName:userName};var userdata=JSON.stringify(obj);localStorage.setItem('userdata',userdata);//dispatch(userinfoRequest(userId))\n//dispatch(userLoginSuccessAction())\nsetTimeout(function(){navigate('/users');},10000);}var arr={\"msgtype\":\"success\",\"msg\":\"Hi \".concat(userName,\" welcome !!\")};var arr2={\"msgtype\":\"danger\",\"msg\":\"username or password invalid\"};return/*#__PURE__*/_jsxs(_Fragment,{children:[success?/*#__PURE__*/_jsx(Alertshow,{arrs:arr}):/*#__PURE__*/_jsx(\"div\",{}),\",\",error&&!loading&&!success?/*#__PURE__*/_jsx(Alertshow,{arrs:arr2}):/*#__PURE__*/_jsx(\"div\",{}),\",\",/*#__PURE__*/_jsxs(Form,{style:{marginTop:'100px'},children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"formBasicEmail\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Username\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"username\",placeholder:\"username\",onChange:function onChange(event){return emailFunc(event.target.value);}}),/*#__PURE__*/_jsx(Form.Text,{className:\"text-muted\"})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"formBasicPassword\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"Password\",onChange:function onChange(event){return passFunc(event.target.value);}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),errorss?/*#__PURE__*/_jsx(\"div\",{style:{color:'red'},children:\"Please enter username and password correctly\"}):/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:signupHandler,children:\"Login\"})]})]});}export default LoginScreen;","map":{"version":3,"names":["React","useEffect","useState","Button","Form","useDispatch","useNavigate","userLoginRequestAction","useAppSelector","Alertshow","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","LoginScreen","_ref","_objectDestructuringEmpty","navigate","itemSet","localStorage","getItem","console","log","_useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","password","setPassword","_useState5","_useState6","isAdmin","setIsAdmin","_useState7","_useState8","errorss","setErrorss","_useState9","_useState10","successLogin","setSuccessLogin","dispatch","_useAppSelector","state","usersReducer","success","loading","error","message","userId","userName","_useAppSelector2","userinfoReducer","loadinguserinfo","successuserinfo","usersData","alertdata","alertReducer","emailFunc","em","passFunc","adminFunc","che","userFunc","signupHandler","submitHandlerFunc","e","preventDefault","length","obj","userdata","JSON","stringify","setItem","setTimeout","arr","concat","arr2","children","arrs","style","marginTop","Group","className","controlId","Label","Control","type","placeholder","onChange","event","target","value","Text","color","variant","onClick"],"sources":["/home/aniketkumar/KB/projectMnagementSystem/frontend/src/screen/LoginScreen.tsx"],"sourcesContent":["\nimport React, { useEffect, useState } from 'react'\nimport { Button, Form } from 'react-bootstrap'\nimport { useDispatch } from 'react-redux'\nimport { useNavigate } from 'react-router-dom'\n\nimport Alert from \"react-bootstrap/Alert\";\n\n//import { useNavigate } from 'react-router-dom'\n\nimport { alertset, userinfoRequest, userLoginRequestAction, userLoginSuccessAction } from '../state/action-creators'\nimport { useAppSelector } from '../Types'\n\nimport Alerts from './Alertscreen'\n\nimport { Alertshow } from '../component/AlertShow';\ntype Props = {}\n\nfunction LoginScreen({ }: Props) {\n\n\n  const navigate = useNavigate()\n\n  useEffect(() => {\n\n    const itemSet = (localStorage.getItem('userdata'));\n    console.log(itemSet)\n    if (itemSet) {\n      console.log('here')\n      navigate('/navigate')\n    }\n  }, [])\n\n\n  const [email, setEmail] = useState('')\n\n  const [password, setPassword] = useState('')\n\n  const [isAdmin, setIsAdmin] = useState(false)\n\n  const [errorss, setErrorss] = useState(false)\n\n  const [successLogin, setSuccessLogin] = useState(false)\n\n  const dispatch = useDispatch()\n\n  //const navigate = useNavigate()\n\n  const { success, loading, error, message, userId, userName } = useAppSelector(state => state.usersReducer)\n\n  const { loadinguserinfo, successuserinfo, usersData } = useAppSelector(state => state.userinfoReducer)\n  const alertdata: [] = useAppSelector(state => state.alertReducer)\n\n\n  const emailFunc = (em: string) => {\n\n    setEmail(em)\n\n    setErrorss(false)\n  }\n\n  const passFunc = (em: string) => {\n\n    setErrorss(false)\n    setPassword(em)\n  }\n\n  const adminFunc = (che: string) => {\n\n\n\n    setIsAdmin(!isAdmin)\n  }\n\n  const userFunc = (che: string) => {\n\n    setIsAdmin(!isAdmin)\n  }\n\n  const signupHandler = () => {\n\n    dispatch(userLoginRequestAction(email, password))\n  }\n\n  // if(success)\n  // {\n  //   dispatch(alertset(\"successfully logged in\", \"success\"))\n  // }\n\n\n  const submitHandlerFunc = (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n\n    e.preventDefault()\n\n\n    console.log(error)\n\n    //  useEffect(() => {\n\n    //   const vb : string | null = localStorage.getItem('userdata')\n\n    //   if(vb != null)\n    //   {\n    //     var obj = JSON.parse(vb)\n\n\n    //   }\n\n\n    //  },[])\n\n    if (email.length > 0 && (password.length >= 6)) {\n      dispatch(userLoginRequestAction(email, password))\n    }\n    else {\n\n      //setErrorss(true)\n    }\n  }\n\n  if (success) {\n    const obj = {\n\n      userId: userId,\n\n      userName: userName\n    }\n\n    const userdata = JSON.stringify(obj)\n\n    localStorage.setItem('userdata', userdata)\n\n    //dispatch(userinfoRequest(userId))\n\n    //dispatch(userLoginSuccessAction())\n\n\n    setTimeout(() => {\n      navigate('/users')\n    }, 10000);\n\n\n  }\n\n  const arr = { \"msgtype\": \"success\", \"msg\": `Hi ${userName} welcome !!` }\n\n  const arr2 = { \"msgtype\": \"danger\", \"msg\": \"username or password invalid\" }\n\n\n  return (\n    <>\n      {\n        success ? <Alertshow arrs={arr} /> : <div></div>\n      },\n      {\n        error && !loading && !success ? <Alertshow arrs={arr2} /> : <div></div>\n      },\n      <Form style={{ marginTop: '100px' }}>\n        <Form.Group className=\"mb-3\" controlId=\"formBasicEmail\">\n          <Form.Label>Username</Form.Label>\n          <Form.Control type=\"username\" placeholder=\"username\" onChange={(event) => emailFunc(event.target.value)} />\n\n          <Form.Text className=\"text-muted\">\n\n          </Form.Text>\n        </Form.Group>\n\n        <Form.Group className=\"mb-3\" controlId=\"formBasicPassword\">\n          <Form.Label>Password</Form.Label>\n          <Form.Control type=\"password\" placeholder=\"Password\" onChange={(event) => passFunc(event.target.value)} />\n        </Form.Group>\n\n        {/* <Button variant=\"primary\" type=\"submit\" onClick = {(event) => submitHandlerFunc(event)}>\n        Submit\n      </Button> */}\n        <br />\n        <br />\n        {errorss ? <div style={{ color: 'red' }}>Please enter username and password correctly</div> : <div></div>}\n\n        <Button variant='primary' onClick={signupHandler}>Login</Button>\n\n      </Form>\n    </>\n  )\n}\n\nexport default LoginScreen"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import _objectDestructuringEmpty from\"/home/aniketkumar/KB/projectMnagementSystem/frontend/node_modules/@babel/runtime/helpers/esm/objectDestructuringEmpty.js\";import React,{useEffect}from'react';import{Button,Table}from'react-bootstrap';import{useAppSelector}from'../Types';import{useDispatch}from'react-redux';import{UsersListRequestAction,userUpdateAdminActionRequest,userDeleteRequestAction}from'../state/action-creators';import{useNavigate}from'react-router-dom';import Loading from'../component/Loading';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var AssignHandler=function AssignHandler(userid,navigate){// const val = JSON.parse(usersall)\n// const useridget : any = val.userId\nconsole.log(\"AssignHandler function\",userid);navigate(\"/users/\".concat(userid));};function ListAllUsersScreen(_ref){_objectDestructuringEmpty(_ref);var navigate=useNavigate();if(localStorage.getItem('userdata')!=undefined){var usersall=localStorage.getItem('userdata');var val=JSON.parse(usersall);var userids=val.userId;}// const useridget : any = val.userId\n//const navigate : any = useNavigate()\nif(localStorage.getItem('userdata')=='undefined'){navigate('/user/login');}/*users : [],\n\n  usersLoading : true,\n\n  successUsers : false,\n\n  errorusers : <false></false>\n  */var dispatch=useDispatch();var usersStates=useAppSelector(function(state){return state.usersReducer;});var _useAppSelector=useAppSelector(function(state){return state.userUpdateAdminReducer;}),loadingupdate=_useAppSelector.loadingupdate,successupdate=_useAppSelector.successupdate,errorupdate=_useAppSelector.errorupdate;var users=usersStates.users,usersLoading=usersStates.usersLoading,successUsers=usersStates.successUsers,errorusers=usersStates.errorusers;var _useAppSelector2=useAppSelector(function(state){return state.userinfoReducer;}),loadinguserinfo=_useAppSelector2.loadinguserinfo,successuserinfo=_useAppSelector2.successuserinfo,usersData=_useAppSelector2.usersData;if(successupdate){dispatch(UsersListRequestAction());}// if(successuserinfo) // storing data of login data\n// {\n//   const datas = JSON.stringify(usersData)\n//   localStorage.setItem('userLoginData',datas)\n// }\nuseEffect(function(){//dispatch(userinfoRequest(userids))\ndispatch(UsersListRequestAction());//dispatch(userinfoRequest(userids))\n//dispatch(UsersListRequestAction())\n},[]);var updateUserHandler=function updateUserHandler(id,e){e.preventDefault();//dispatch()\ndispatch(userUpdateAdminActionRequest(id));//dispatch(UsersListRequestAction())\n};var deleteUserHandler=function deleteUserHandler(id,e){e.preventDefault();console.log(\"delete\",id);dispatch(userDeleteRequestAction(id));dispatch(UsersListRequestAction());};console.log(users,\"aniket\");// const values : any = localStorage.getItem('userLoginData')\n// const userStatus : \n// if(values != 'undefined')\n// {\n// }\nreturn/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h1\",{children:\"Users\"}),usersLoading?/*#__PURE__*/_jsx(Loading,{}):successUsers?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,responsive:true,className:\"table-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"user_id\"}),/*#__PURE__*/_jsx(\"th\",{children:\"user Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Role\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Assign Project\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Upgrade Role\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Remove User\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(function(u){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:u.user_id}),/*#__PURE__*/_jsx(\"td\",{children:u.userName}),/*#__PURE__*/_jsx(\"td\",{children:u.email}),/*#__PURE__*/_jsx(\"td\",{children:u.role}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:function onClick(){return AssignHandler(u.user_id,navigate);},children:\"Assign\"}),\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[u.role==\"User\"?/*#__PURE__*/_jsx(Button,{onClick:function onClick(e){return updateUserHandler(u.user_id,e);},children:\"Update User\"}):/*#__PURE__*/_jsx(\"div\",{}),\" \"]}),/*#__PURE__*/_jsx(\"td\",{children:u.status==\"Active\"?/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:function onClick(e){return deleteUserHandler(u.user_id,e);},children:\"Remove\"}):/*#__PURE__*/_jsx(\"div\",{})})]},u.user_id);})})]})}):/*#__PURE__*/_jsx(\"h1\",{children:\"Error\"})]});}/*{users.map(user => (\n  <tr key ={user._id}>\n    <td>{user._id}</td>\n    <td>{user.name}</td>\n    <td><a href={`mailto:${user.email}`}>{user.email}</a></td>\n    <td>{user.isAdmin ? (<i className='fas fa-check' style ={{color: 'green'}}></i>) : (<i className='fas fa-times' style ={{color: 'red'}}></i>)}</td>\n    <td>\n      <LinkContainer to = {`/update/${user._id}`}>\n        <Button variant='light' className='btn-sm' >\n          <i className='fas fa-edit'></i>\n        </Button>\n      </LinkContainer>\n      <Button variant='danger' className='btn-sm'></Button>\n    </td>\n  </tr>\n))}*/export default ListAllUsersScreen;","map":{"version":3,"names":["React","useEffect","Button","Table","useAppSelector","useDispatch","UsersListRequestAction","userUpdateAdminActionRequest","userDeleteRequestAction","useNavigate","Loading","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AssignHandler","userid","navigate","console","log","concat","ListAllUsersScreen","_ref","_objectDestructuringEmpty","localStorage","getItem","undefined","usersall","val","JSON","parse","userids","userId","dispatch","usersStates","state","usersReducer","_useAppSelector","userUpdateAdminReducer","loadingupdate","successupdate","errorupdate","users","usersLoading","successUsers","errorusers","_useAppSelector2","userinfoReducer","loadinguserinfo","successuserinfo","usersData","updateUserHandler","id","e","preventDefault","deleteUserHandler","children","striped","bordered","hover","responsive","className","map","u","user_id","userName","email","role","variant","onClick","status"],"sources":["/home/aniketkumar/KB/projectMnagementSystem/frontend/src/screen/ListAllUsersScreen.tsx"],"sourcesContent":["\n\nimport React, { useEffect } from 'react'\nimport { Button, Table } from 'react-bootstrap'\nimport { useSelector } from 'react-redux'\n\nimport { LinkContainer } from 'react-router-bootstrap'\nimport Message from '../component/Message'\n\nimport { useAppSelector } from '../Types'\n\nimport { useDispatch } from 'react-redux'\nimport { userinfoRequest, UsersListRequestAction, userUpdateAdminActionRequest, userDeleteRequestAction } from '../state/action-creators'\n\nimport { useNavigate } from 'react-router-dom'\n\nimport Loading from '../component/Loading'\n\n\n\nconst AssignHandler = (userid : string,navigate : any) => {\n\n  \n\n  \n  // const val = JSON.parse(usersall)\n\n\n  // const useridget : any = val.userId\n\n\n\n  console.log(\"AssignHandler function\", userid)\n  \n\n  navigate(`/users/${userid}`)\n}\n\ntype Props = {}\n\ntype usercheck = {\n  user_id : string,\n  userName : string,\n  email : string,\n\n  role : string,\n\n  status: string,\n\n  Projects: null\n}\ntype usersTypesInfo = {\n\n  email: string,\n\n  password : string,\n\n  loading: boolean,\n\n  success: boolean,\n\n  error: {},\n  users : [usercheck],\n\n  usersLoading : boolean,\n\n  successUsers : boolean,\n\n  errorusers : boolean\n}\n\n\n\n\nfunction ListAllUsersScreen({}: Props) {\n  \n  const navigate = useNavigate()\n\n  if(localStorage.getItem('userdata') != undefined)\n  {\n    const usersall : any = localStorage.getItem('userdata') \n\n  \n   const val  = JSON.parse(usersall)\n\n   const userids = val.userId\n  }\n\n  // const useridget : any = val.userId\n     //const navigate : any = useNavigate()\n\n  if(localStorage.getItem('userdata') == 'undefined')\n  {\n    navigate('/user/login')\n  }\n  /*users : [],\n\n  usersLoading : true,\n\n  successUsers : false,\n\n  errorusers : <false></false>\n  */\n\n  const dispatch = useDispatch()\n\n  const usersStates : usersTypesInfo  = useAppSelector(state => state.usersReducer)\n  const {loadingupdate,successupdate,errorupdate} = useAppSelector(state => state.userUpdateAdminReducer)\n  const {users,usersLoading ,successUsers,errorusers} = usersStates\n  const {loadinguserinfo,successuserinfo,usersData} = useAppSelector(state => state.userinfoReducer)\n\n\n  if(successupdate)\n  {\n    dispatch(UsersListRequestAction())\n  }\n\n  // if(successuserinfo) // storing data of login data\n  // {\n  //   const datas = JSON.stringify(usersData)\n\n  //   localStorage.setItem('userLoginData',datas)\n  // }\n\n  useEffect(() => {\n\n    //dispatch(userinfoRequest(userids))\n    dispatch(UsersListRequestAction())\n    //dispatch(userinfoRequest(userids))\n    //dispatch(UsersListRequestAction())\n  },[])\n  \n\nconst updateUserHandler = (id : string,e : React.MouseEvent<HTMLButtonElement>) => {\n\n  e.preventDefault()\n\n  //dispatch()\n\n  dispatch(userUpdateAdminActionRequest(id))\n\n  //dispatch(UsersListRequestAction())\n}\nconst deleteUserHandler =(id : string, e : React.MouseEvent<HTMLButtonElement>) => {\n  e.preventDefault()\n  console.log(\"delete\",id)\n  dispatch(userDeleteRequestAction(id))\n\n  dispatch(UsersListRequestAction())\n}\n\n\nconsole.log(users,\"aniket\")\n\n// const values : any = localStorage.getItem('userLoginData')\n\n// const userStatus : \n// if(values != 'undefined')\n// {\n\n// }\n  return (\n    \n   \n    <div>\n    <br/>\n    <br/>\n\n    <h1>Users</h1>\n    {usersLoading ? <Loading/> : successUsers ? <><Table  striped bordered hover responsive className='table-sm'>\n      <thead>\n        <tr>\n          \n          <th>user_id</th>\n          <th>user Name</th>\n          <th>email</th>\n          <th>Role</th>\n          <th>Assign Project</th>\n          <th>Upgrade Role</th>\n          <th>Remove User</th>\n        </tr>\n      </thead>\n      <tbody>\n        \n          {users.map(u => \n            <tr key = {u.user_id}>\n              <td>{u.user_id}</td>\n              <td>{u.userName}</td>\n              <td>{u.email}</td>\n              <td>{u.role}</td>\n              <td ><Button variant='primary' onClick = { () => AssignHandler(u.user_id,navigate)}>Assign</Button> </td>\n              <td>{u.role == \"User\" ? (<Button onClick = {(e) => updateUserHandler(u.user_id,e)}>Update User</Button>) : (<div></div>)} </td>\n              <td>{u.status == \"Active\" ? (<Button variant='danger' onClick = { (e) => deleteUserHandler(u.user_id,e)}>Remove</Button>) : (<div></div>)}</td>\n            </tr>\n          )}\n          \n        \n       \n        \n      </tbody>\n    </Table></> : <h1>Error</h1> }\n  </div>\n    \n  )\n}\n\n/*{users.map(user => (\n  <tr key ={user._id}>\n    <td>{user._id}</td>\n    <td>{user.name}</td>\n    <td><a href={`mailto:${user.email}`}>{user.email}</a></td>\n    <td>{user.isAdmin ? (<i className='fas fa-check' style ={{color: 'green'}}></i>) : (<i className='fas fa-times' style ={{color: 'red'}}></i>)}</td>\n    <td>\n      <LinkContainer to = {`/update/${user._id}`}>\n        <Button variant='light' className='btn-sm' >\n          <i className='fas fa-edit'></i>\n        </Button>\n      </LinkContainer>\n      <Button variant='danger' className='btn-sm'></Button>\n    </td>\n  </tr>\n))}*/\n\n\nexport default ListAllUsersScreen"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}